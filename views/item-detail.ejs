<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head.ejs') %> 
<body>

  <%- include('./partials/nav.ejs') %> 

     <div class="container">

        <div class="card medium">
            <div class="card-image waves-effect waves-block waves-light">
              
            </div>
            <div class="card-content">
              <span class="card-title activator grey-text text-darken-4"><%= item.name %> <i class="material-icons right">more_vert</i></span>
              <p><%= item.price %>$ </p>
            </div>
            <div class="card-reveal">
              <span class="card-title grey-text text-darken-4">More options<i class="material-icons right">close</i></span>
              
                <p><button id="deleteBtn" data-id="<%= item._id %> "  class="red modal-close waves-effect btn waves-red">Delete</button></p>
              
              
            </div>
          </div>


    </div>



    <%- include('./partials/footer.ejs') %> 

    <script type="text/javascript">

    deleteBtn.onclick = function (e) {
      e.preventDefault();
      const id = deleteBtn.dataset.id;
      console.log(id);
      const endpoint =`/items/${id}`;
      fetch(endpoint,{
        method:'DELETE'
      }).then(res=>{
        res.json().then(data=>window.location.href = data.redirect)
      }).catch(err=>console.log(err)); 
    }


   
     document.addEventListener('DOMContentLoaded', function() {
         var elems = document.querySelectorAll('.modal');
         var instances = M.Modal.init(elems, {});
         M.updateTextFields();
     });

    
 
 </script>

   
</body>
</html>