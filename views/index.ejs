<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head.ejs') %> 
<body>

  <%- include('./partials/nav.ejs') %> 

     <div class="container">
        <ul class="collection with-header">
            
              <%if(items.length > 0){%>
                
                 <% items.forEach(element => { %>  

                  <li class="collection-item">
                    <div><i class="material-icons prefix">shopping_cart</i>
                      <a style="text-decoration: none;" href="/items/<%= element.id %> "><%= element.name %>   <%=  element.price %>$ </a><a href="#!" class="secondary-content">
                      <i id="<%= element.id %>"  onclick="const endpoint =`/items/${this.id}`;
                        fetch(endpoint,{
                          method:'DELETE'
                        }).then(res=>{
                          res.json().then(data=>window.location.href = data.redirect)
                        }).catch(err=>console.log(err));" class="material-icons">delete</i>
                      <i class="material-icons">edit</i>
                      </a>
                    </div>
                  </li> 
  
                   <% }); %> 
                

                

             <% } else {%>   
                  <li>there are no items</li>
              <% } %> 
           

            
          </ul>
     </div>



     <%- include('./partials/footer.ejs') %> 

     <script type="text/javascript">


    
      document.addEventListener('DOMContentLoaded', function() {
          var elems = document.querySelectorAll('.modal');
          var instances = M.Modal.init(elems, {});
          M.updateTextFields();
      });

     
  
  </script>

    
</body>
</html>